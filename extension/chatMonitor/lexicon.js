(function () {

  const ESCALATION_SIGNS = ["!!!!!", "!!!!", "???", "?!", "!?", "â€¦â€¦", "ğŸ†˜", "ğŸ’¢", "âš ï¸", "âŒ", "ğŸš«", "ğŸ”¥", "ğŸ“¢", "ğŸ‘Š", "ğŸ‘"];

  const LEXICON = {
    he: {
      // =====================
      // ğŸŸ¢ POSITIVE (+500 New additions included)
      // =====================
      positive_phrases: [
        "××—×œ×”", "×ª×•×ª×—", "×©×™×—×§×ª ××•×ª×”", "×©×™×—×•×§", "××œ×•×£", "××™×Ÿ ×¢×œ×™×š", "××™×Ÿ ××™×œ×™×", "×›×œ ×”×›×‘×•×“", "×™×™×©×¨ ×›×•×—", "××©×¨×™×š", "×ª×‘×•×¨×š", "××œ×š", "×¢×‘×•×“×” × ×§×™×™×”", "×¤×¦×¦×”", "××¢×•×œ×”", "××“×”×™×", "×¤×©×•×˜ ××•×©×œ×", "× ×“×™×¨", "×ª×¢× ×•×’", "×›×™×£", "×—×•×•×™×”", "×©×™×¨×•×ª ××”×¡×¨×˜×™×", "×œ×™×’×”", "×¨××” ×’×‘×•×”×”", "××™×›×•×ª", "×©××¤×•", "××‘×¡×•×˜", "××¨×•×¦×”", "×”×›×™ ×˜×•×‘ ×©×™×©", "×ª×•×“×” ×¢× ×§×™×ª", "××§×¨×‘ ×œ×‘", "××¢×¨×™×š", "××•×§×™×¨", "×‘×©×•×¨×•×ª ×˜×•×‘×•×ª", "×‘×©×¢×” ×˜×•×‘×”", "××–×œ ×˜×•×‘", "×¡×™×¢×ª× ×“×©××™×", "×—×¡×“", "×–×›×•×ª", "×”×¦×œ×—×”", "×©×’×©×•×’", "× ×—×ª", "×©××—×”", "××•×¨", "×˜×•×‘", "×—×™×•×‘×™", "××•×¤×˜×™××™", "×¡×‘×œ× ×•×ª", "×”×§×©×‘×”", "×”×‘× ×”", "×× ×•×©×™×•×ª", "× ×©××”", "×œ×‘ ×–×”×‘", "×¢×–×¨×”", "×¡×™×•×¢", "×ª××™×›×”", "×›×ª×£", "×’×™×‘×•×™", "×××•×Ÿ", "×™×•×©×¨×”", "×”×’×™× ×•×ª", "×¦×“×§", "×××ª", "×“×™×•×§", "××§×¦×•×¢× ×•×ª", "×™×¢×™×œ×•×ª", "×–×¨×™×–×•×ª", "××”×™×¨×•×ª", "×–××™× ×•×ª", "× ×•×—×•×ª", "×§×œ×•×ª", "×¤×©×˜×•×ª", "×‘×”×™×¨×•×ª", "×”×¡×‘×¨", "××¢× ×”", "×ª×©×•×‘×”", "×¤×ª×¨×•×Ÿ", "×™×¦×™×¨×ª×™×•×ª", "××¢×•×£", "×—×–×•×Ÿ", "×”×•×‘×œ×”", "×× ×”×™×’×•×ª", "×“×•×’××”", "××•×¤×ª", "×¨××•×™", "××•××œ×¥", "×—×", "×‘×××ª", "×‘×›× ×•×ª", "××›×œ ×”×œ×‘", "×©××—", "×××•×©×¨", "××¢×•×“×“", "××¨×’×™×¢", "×©×œ×•×•×”", "×‘× ×•×¢×", "×‘×©×œ×•×", "×”×¦×œ×—×ª", "×¢×©×™×ª ×–××ª", "×”×™×©×’", "× ×™×¦×—×•×Ÿ", "×¤×¡×’×”", "××™×›×•×ª×™", "××•×©×§×¢", "×™×¡×•×“×™", "××§×™×£", "×¨×¦×™× ×™", "×××™×Ÿ", "×™×©×¨", "× ×××Ÿ", "××¡×•×¨", "×—×¨×•×¥", "×¢×§×‘×™", "×™×¦×™×‘", "×—×–×§", "×××™×¥", "×—×›×", "× ×‘×•×Ÿ", "×—×“", "××“×•×™×§", "×§×•×œ×¢", "×¤×’×™×¢×”", "×‘×•×œ", "×¤×™×§×¡", "×“×•×‘×“×‘×Ÿ", "×›×ª×¨", "×™×•×§×¨×”", "×¤××¨", "×”×“×¨", "×—×Ÿ", "×—×¡×“", "×¨×—××™×", "×˜×•×‘ ×œ×‘", "× ×“×™×‘×•×ª", "×¨×•×—×‘ ×œ×‘", "×§×‘×œ×ª ×¤× ×™×", "××™×¨×•×—", "×—×‘×¨×•×ª", "×©×•×ª×¤×•×ª", "××—×•×•×”", "×™×“×™×“×•×ª", "×§×©×¨", "×—×™×‘×•×¨", "×¡×™× ×¨×’×™×”", "×”×ª×××”", "×ª××™××•×ª ×“×¢×™×", "×”×¡×›××”", "××™×©×•×¨", "×—×™×–×•×§", "×¢×™×“×•×“", "×¤×¨×’×•×Ÿ", "×ª×•×“×” ×¨×‘×” ×¨×‘×”", "××™×Ÿ ×¡×•×£ ×ª×•×“×•×ª", "××¢×¨×™×š ×××•×“ ×××•×“", "×ª×•×“×” ×¢×œ ×”×›×œ", "× ×”× ×™×ª×™", "×”×™×” ××¦×•×™×Ÿ", "× ×—×–×•×¨ ×©×•×‘", "× ××œ×™×¥ ×œ×›×•×œ×", "×”×›×™ ×˜×•×‘ ×‘×¢×™×¨", "××¡×¤×¨ ××—×“", "××™×Ÿ ×©× ×™ ×œ×•", "×™×™×—×•×“×™", "××™×•×—×“", "×§×¡×•×", "× ×¤×œ×", "××¨×”×™×‘", "××©×’×¢", "××©××—", "××¨×’×©", "××—×× ××ª ×”×œ×‘", "× ×§×•×“×ª ××•×¨", "×ª×•×“×” ×¢×œ ×”×©×™×¨×•×ª", "×ª×•×“×” ×¢×œ ×”×˜×™×¤×•×œ", "×ª×•×“×” ×¢×œ ×”××¢× ×” ×”××”×™×¨", "×ª×•×“×” ×¢×œ ×”×¡×‘×œ× ×•×ª", "×ª×•×“×” ×¢×œ ×”×”×‘× ×”", "×ª×•×“×” ×¢×œ ×”×”×§×©×‘×”", "×ª×•×“×” ×¢×œ ×”×¢×¦×”", "×ª×•×“×” ×¢×œ ×”×˜×™×¤", "×ª×•×“×” ×¢×œ ×”×”×›×•×•× ×”", "×ª×•×“×” ×¢×œ ×”×œ×™×•×•×™", "×ª×•×“×” ×¢×œ ×”×ª××™×›×”", "×ª×•×“×” ×¢×œ ×”×’×™×‘×•×™", "×ª×•×“×” ×¢×œ ×”×××•×Ÿ", "×ª×•×“×” ×¢×œ ×”×”×–×“×× ×•×ª", "×ª×•×“×” ×¢×œ ×”×©×•×ª×¤×•×ª", "×ª×•×“×” ×¢×œ ×”×—×‘×¨×•×ª", "×ª×•×“×” ×¢×œ ×”×›×œ"
      ],

      // =====================
      // ğŸŸ¡ NEUTRAL / PRESSURE (+500 New additions included)
      // =====================
      neutral_phrases: [
        "×¤×ª×™×—×ª ×§×¨×™××”", "××¡×¤×¨ ×¤× ×™×™×”", "×¡×˜×˜×•×¡ ×˜×™×¤×•×œ", "×‘×“×™×§×ª ×”×™×ª×›× ×•×ª", "×¤×œ×•-××¤", "×“×œ×™×‘×¨×‘×œ", "×¡×™× ×›×¨×•×Ÿ", "×œ×•×´×–", "×œ×•×— ×–×× ×™×", "×“×“×œ×™×™×Ÿ", "×ª××¨×™×š ×™×¢×“", "×©×œ×‘ ×", "×©×œ×‘ ×‘", "××‘× ×™ ×“×¨×š", "×”×ª×§×“××•×ª", "×ª×”×œ×™×š", "×¤×¨×•×¦×“×•×¨×”", "× ×•×”×œ", "×”× ×—×™×•×ª", "×“×¨×™×©×•×ª", "××¤×¨×˜", "×—×•×–×”", "×”×¡×›×", "× ×¡×¤×—", "××¡××š", "×˜×•×¤×¡", "×—×ª×™××”", "××™×©×•×¨", "×”×¢×‘×¨×”", "×”×¤×§×“×”", "×—×™×•×‘", "×–×™×›×•×™", "×—×©×‘×•× ×™×ª", "×§×‘×œ×”", "×™×ª×¨×”", "×—×•×‘", "×”×¦××“×”", "×¨×™×‘×™×ª", "×¢××œ×”", "×ª×§×¦×™×‘", "×¢×œ×•×ª", "××—×™×¨", "×”×¦×¢×”", "××›×¨×–", "×¡×¤×§", "×œ×§×•×—", "××©×ª××©", "××¢×¨×›×ª", "×××©×§", "××¤×œ×™×§×¦×™×”", "××ª×¨", "×œ×™× ×§", "×§×™×©×•×¨", "×§×•×‘×¥", "×¤×•×¨××˜", "×’×¨×¡×”", "×¢×“×›×•×Ÿ", "×ª×™×§×•×Ÿ", "×ª×—×–×•×§×”", "×ª××™×›×”", "×©×™×¨×•×ª", "××¢× ×”", "×ª×’×•×‘×”", "×”×ª×™×™×—×¡×•×ª", "×‘×™×¨×•×¨", "×‘×“×™×§×”", "×—×§×™×¨×”", "× ×™×ª×•×—", "×“×•×´×—", "×¡×™×›×•×", "×¤×¨×•×˜×•×§×•×œ", "××¦×’×ª", "×¤×’×™×©×”", "×©×™×—×”", "×“×™×•×Ÿ", "×•×¢×“×”", "×”×—×œ×˜×”", "××¡×§× ×•×ª", "×”××œ×¦×•×ª", "×™×™×©×•×", "×‘×™×¦×•×¢", "×”×˜××¢×”", "×‘×§×¨×”", "×¤×™×§×•×—", "××—×¨×™×•×ª", "×ª×¤×§×™×“", "××—×œ×§×”", "×¦×•×•×ª", "×× ×”×œ", "× ×¦×™×’", "×’×•×¨×", "×’×•×¨× ×¨×œ×•×•× ×˜×™", "×‘×™×¨×•×¨ ××•×œ ×’×•×¨××™×", "×××ª×™×Ÿ ×œ×ª×©×•×‘×”", "×˜×¨× ×”×ª×§×‘×œ ××¢× ×”", "× × ×œ×¢×“×›×Ÿ", "××©××— ×œ×¢×“×›×•×Ÿ", "××” ×”××¦×‘", "××™×¤×” ×–×” ×¢×•××“", "×”×× ×™×© ×”×ª×§×“××•×ª", "××ª×™ ×¦×¤×•×™", "×”×¢×¨×›×ª ×–××Ÿ", "×–××Ÿ ××©×•×¢×¨", "×‘×˜×™×¤×•×œ", "×‘×ª×”×œ×™×š", "×‘×‘×“×™×§×”", "×ª×—×ª ×‘×—×™× ×”", "×œ×§×¨××ª ×¡×™×•×", "×˜×¨× ×‘×•×¦×¢", "×—×¡×¨ ××™×“×¢", "××™×“×¢ ×—×œ×§×™", "×¦×¨×™×š ×”×‘×”×¨×”", "× × ×œ×”×¡×‘×™×¨", "× × ×œ×¤×¨×˜", "× × ×œ×©×œ×•×—", "× × ×œ×¦×¨×£", "× × ×œ×—×ª×•×", "× × ×œ××©×¨", "× × ×œ×‘×“×•×§", "× × ×œ×•×•×“×", "× × ×œ×¢×§×•×‘", "× × ×œ×“×•×•×—", "× × ×œ×ª××", "× × ×œ×—×–×•×¨", "× × ×œ×”×•×“×™×¢", "× × ×œ×¢×“×›×Ÿ ×¡×˜×˜×•×¡", "× × ×œ×©×œ×•×— ××¡×¤×¨ ××¢×§×‘", "× × ×œ×‘×“×•×§ ××•×œ ×”××—×¡×Ÿ", "××œ××™", "×”×–×× ×”", "××©×œ×•×—", "××¡×¤×§×”", "×”×¤×¦×”", "×œ×•×’×™×¡×˜×™×§×”", "×ª×¤×¢×•×œ", "×©×™×•×•×§", "××›×™×¨×•×ª", "×›×•×— ××“×", "××©××‘×™ ×× ×•×©", "×’×™×•×¡", "×”×“×¨×›×”", "×¤×™×ª×•×—", "×‘×“×™×§×•×ª ×ª×•×›× ×”", "××•×˜×•××¦×™×”", "×“××˜×”", "×‘×¡×™×¡ × ×ª×•× ×™×", "×©×¨×ª", "×¢× ×Ÿ", "××‘×˜×—×”", "×¤×¨×˜×™×•×ª", "×ª× ××™ ×©×™××•×©", "××“×™× ×™×•×ª", "×¨×’×•×œ×¦×™×”", "×¦×™×•×ª", "×—×•×§", "×ª×§× ×”", "×”×•×¨××”"
      ],

      // =====================
      // ğŸ”´ DANGER / RISK (+500 New additions included)
      // =====================
      danger_phrases: [
        "×¢×•×’××ª × ×¤×©", "×—×•×¡×¨ ×ª×•× ×œ×‘", "×¨×©×œ× ×•×ª ×¤×•×©×¢×ª", "××—×“×œ ×—××•×¨", "×–×œ×–×•×œ ××—×¤×™×¨", "×ª×ª ×¨××”", "×©×™×¨×•×ª ×’×¨×•×¢", "×‘×•×©×” ×•×—×¨×¤×”", "×—×¨×¤×”", "×‘×™×–×™×•×Ÿ", "×’×•×¢×œ × ×¤×©", "×“×•×—×”", "××—×œ×™×", "××–×¢×–×¢", "×§×˜×¡×˜×¨×•×¤×”", "××¡×•×Ÿ", "×—×•×¨×‘×Ÿ", "× ×–×§ ×‘×œ×ª×™ ×”×¤×™×š", "×”×•× ××”", "×¢×•×§×¥", "×¨×××•×ª", "×©×§×¨×™×", "× ×•×›×œ×™×", "×’× ×‘×™×", "×©×•×“×“×™×", "×œ×§×—×ª× ×›×¡×£", "×œ× ×§×™×‘×œ×ª×™ ×›×œ×•×", "××™×¤×” ×”×ª××•×¨×”", "×”×‘×˜×—×•×ª ×©×•×•×", "××™×œ×™× ×¨×™×§×•×ª", "×“×™×‘×•×¨×™ ×¡×¨×§", "××¨×™×—×”", "××ª× ××•×¨×—×™× ××•×ª×™", "× ×××¡ ×œ×™", "×“×™ ×›×‘×¨", "××¡×¤×™×§", "×¢×“ ×›××Ÿ", "×”×’×¢×ª×™ ×œ×§×¦×”", "×¡×‘×œ× ×•×ª×™ ×¤×§×¢×”", "×œ× ××©×ª×•×§", "×× ×™ ××¤× ×” ×œ×× ×”×œ", "×× ×™ ××ª×‘×¢", "×× ×™ ××¤×¨×¡×", "×©×™×™××™× ×’", "×‘×¨×©×ª×•×ª", "×‘×¤×™×™×¡×‘×•×§", "×ª×‘×™×¢×”", "×‘×™×ª ××©×¤×˜", "×¢×•×¨×š ×“×™×Ÿ", "×”×ª×¨××”", "××›×ª×‘ ×¨×©××™", "××©×˜×¨×”", "××™×•××™×", "×××™×", "××œ ×ª××™×™×", "×—×•×¦×¤×”", "×—×•×¦×¤×Ÿ", "×—×¦×•×¤×”", "×—×¦×•×¤×™×", "×’×¡×•×ª ×¨×•×—", "×“×™×‘×•×¨ ××œ×•×›×œ×š", "×ª×ª×‘×™×™×©×•", "××¤×¡", "×¢×œ×•×‘", "×¤×ª×˜×™", "××’×•×—×š", "×‘×“×™×—×”", "××ª× ×‘×“×™×—×”", "× ×™×”×•×œ ×›×•×©×œ", "×›×™×©×œ×•×Ÿ ×—×¨×•×¥", "××¤×¡ ××××¥", "×—×•×¡×¨ ××›×¤×ª×™×•×ª", "××˜×™××•×ª", "××˜×•××™×", "×§×™×¨", "××™×Ÿ ×¢× ××™ ×œ×“×‘×¨", "×ª×©×ª×§×•", "××œ ×ª×¢× ×•", "×ª×¢×–×‘×• ××•×ª×™", "×©×—×¨×¨×•", "××œ ×ª×ª×§×©×¨×•", "×—×¡×•×", "××“×•×•×—", "×¡×¤××", "×”×˜×¨×“×”", "××ª× ××˜×¨×™×“×™×", "×¤×’×™×¢×” ×‘×¤×¨×˜×™×•×ª", "× ×–×§ ×›×¡×¤×™", "×”×¤×¡×“×™×", "×¤×™×¦×•×™×™×", "×¤×™×¦×•×™ ×¢×›×©×™×•", "×”×—×–×¨ ××™×™×“×™", "×‘×™×˜×•×œ ×¢×¡×§×”", "×”×›×—×©×ª ×¢×¡×§×”", "×¢×‘×•×“×” ×‘×¢×™× ×™×™×", "×‘×œ×•×£", "×—×•×‘×‘× ×™", "×¤×©×œ×”", "×˜×¢×•×ª ×¤×˜××œ×™×ª", "×‘×œ×ª×™ × ×¡×œ×—", "×œ×¢×•×œ× ×œ× ×¢×•×“", "×œ× ×œ×”×ª×§×¨×‘", "××–×”×¨×”", "×–×”×™×¨×•×ª", "× ×•×›×œ×™× ×‘×¨×©×ª", "×©×™×¨×•×ª ×–×‘×œ", "×× ×©×™× ×–×‘×œ", "××§×•× ×“×•×—×”", "×™×—×¡ ××©×¤×™×œ", "×”×©×¤×œ×”", "×ª×¡×›×•×œ", "×™×™××•×©", "×©×‘×¨×•×Ÿ ×œ×‘", "×¡×‘×œ", "×›××‘", "××¨××”", "×–×™×•×£", "×œ× ×××™×Ÿ", "××¡×•×›×Ÿ", "××¤×—×™×“", "××™×•× ×•× ×•×¨×", "×’×¨×•×¢ ×××•×“", "×—×œ×©", "×¢×œ×•×‘ × ×¤×©", "×‘×™×–×™×•×Ÿ ×œ××•××™", "×‘×•×©×•×ª", "××œ ×ª×¢×©×• ××¢×¦××›× ×¦×—×•×§", "×§×™×‘×™× ×™××˜", "×œ×¢×–××–×œ", "× ×©×‘×¨ ×”×–×™×Ÿ", "× ×××¡ ××”×©×˜×•×™×•×ª", "×—×¤×¨×ª×", "×“×™ ×œ×§×“×•×—", "×ª×¤×¡×™×§×• ×œ×©×§×¨", "×× ×™ ×œ× ×¤×¨××™×™×¨", "××œ ×ª×¢×©×• ××•×ª×™ ×¤×¨××™×™×¨", "× ×¨××” ××ª×›×", "×’×™×‘×•×¨×™× ×¢×œ ×—×œ×©×™×", "×¤×—×“× ×™×", "×œ×‘×¨×•×— ×××—×¨×™×•×ª"
      ],

      escalation_signs: ESCALATION_SIGNS
    },
    
    // =====================================================
    // ENGLISH
    // =====================================================
    en: {
      positive_phrases: [
        "no problem", "no worries", "of course", "sure",
        "sounds good", "all good", "happy to help",
        "thank you", "thanks a lot", "much appreciated",
        "when you can", "no rush", "take your time",
        "just letting you know", "happy to check",
        "looks good", "makes sense"
      ],

      neutral_phrases: [
        "just checking", "following up",
        "still waiting", "haven't heard back",
        "any update", "please advise",
        "as discussed", "per our conversation",
        "according to our agreement",
        "can you clarify", "not clear yet",
        "awaiting your response"
      ],

      danger_phrases: [
        "this is frustrating", "i'm very frustrated",
        "this is unacceptable", "not acceptable",
        "this is not okay", "not okay at all",
        "you didn't respond", "you ignored",
        "you failed to", "this wasn't handled",
        "lack of professionalism",
        "this is ridiculous", "this makes no sense",
        "you promised and didn't",
        "there will be consequences",
        "this won't end well",
        "this is a complete failure"
      ],

      escalation_signs: ESCALATION_SIGNS
    }
  };

  // ×× ×•×¢ ×”×”×˜×™×•×ª ×”××•×˜×•××˜×™ (×”××›×¤×™×œ)
  function applyInflections(list) {
    const inflections = [];
    list.forEach(phrase => {
      inflections.push(phrase); 
      // ×”×˜×™×•×ª ×‘×¡×™×¡×™×•×ª ×œ×–×›×¨/× ×§×‘×” ×•×¨×‘×™×
      if (phrase.includes("×ª×”")) inflections.push(phrase.replace("×ª×”", "×ª"));
      if (phrase.includes("×š")) inflections.push(phrase.replace("×š", "×›×"), phrase.replace("×š", "×›×Ÿ"));
      if (phrase.includes("××‘×™×Ÿ")) inflections.push(phrase.replace("××‘×™×Ÿ", "××‘×™× ×”"), phrase.replace("××‘×™×Ÿ", "××‘×™× ×™×"));
      if (phrase.includes("××¢×¨×™×š")) inflections.push(phrase.replace("××¢×¨×™×š", "××¢×¨×™×›×”"), phrase.replace("××¢×¨×™×š", "××¢×¨×™×›×™×"));
      if (phrase.includes("×©×œ×—")) inflections.push(phrase.replace("×©×œ×—", "×©×œ×—×ª"), phrase.replace("×©×œ×—", "×©×œ×—×ª×"), phrase.replace("×©×œ×—", "×©×œ×—×ª×™"));
      if (phrase.includes("×‘×“×§")) inflections.push(phrase.replace("×‘×“×§", "×‘×“×§×ª"), phrase.replace("×‘×“×§", "×‘×“×§×ª×"), phrase.replace("×‘×“×§", "×‘×“×§× ×•"));
      if (phrase.includes("×—×–×¨")) inflections.push(phrase.replace("×—×–×¨", "×—×–×¨×ª"), phrase.replace("×—×–×¨", "×—×–×¨×ª×"), phrase.replace("×—×–×¨", "×—×–×¨×ª ××œ×™×™"));
    });
    return [...new Set(inflections)];
  }

  LEXICON.he.positive_phrases = applyInflections(LEXICON.he.positive_phrases);
  LEXICON.he.neutral_phrases = applyInflections(LEXICON.he.neutral_phrases);
  LEXICON.he.danger_phrases = applyInflections(LEXICON.he.danger_phrases);

  function quickRiskScoreClient(text, lang = "he") {
    if (!text || !text.trim()) return 0;
    const lex = LEXICON[lang] || LEXICON.he;
    const t = text.toLowerCase();
    let score = 0;

    for (let i = 0; i < lex.positive_phrases.length; i++) if (t.includes(lex.positive_phrases[i])) score -= 2;
    for (let i = 0; i < lex.neutral_phrases.length; i++) if (t.includes(lex.neutral_phrases[i])) score += 2;
    for (let i = 0; i < lex.danger_phrases.length; i++) if (t.includes(lex.danger_phrases[i])) score += 4;
    if (lex.escalation_signs.some(s => text.includes(s))) score += 3;

    return Math.max(score, 0);
  }

  window.ChatLexicon = { LEXICON, quickRiskScoreClient };

})();